<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Estación Meteorológica Campus Puebla</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/2-col-portfolio.css" rel="stylesheet">
	 <link href="js/jquery-ui.css" rel="stylesheet">
	 <script type='text/javascript' src='datejs/date.js'></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	  <div class="container">
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand" href="index.html">Estación Meteorológica Campus Puebla</a>
	    </div>

	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
	      <ul class="nav navbar-nav">
	        <li><a href="acercade.html">Acerca de la estaci&oacute;n</a></li>
		  	</ul>
			 <ul class="nav navbar-nav navbar-right">
			  <li><a href="http://www.itesm.mx/wps/wcm/connect/Campus/PUE/Puebla/"><img class="displayed" src="iconos/ITESMLogo.png"></img></li>
			  <li><a href="http://www.itesm.mx/wps/wcm/connect/Campus/PUE/Puebla/"><img class="displayed" src="iconos/ITESMLogo2-01.png"></img></li>
	      </ul>
	    </div>
	  </div>
	</nav>
	
	<div class="container">
		<!-- Page Header -->
		<div class="row" id="pageheader">
			<div class="col-lg-9">
				<h1 class="page-header">Condiciones actuales 
					<small>Actualizado cada 10 minutos</small>
            </h1>
         </div>
     	</div> <!-- listo pageheader-->
		
		<!-- fila de cuadritos y tabla -->
			<div class="row">
      		<div class="col-md-9 portfolio-item">
          		<div class="row" style=" margin-top: 20px;">
				 		<div class="col-md-3 portfolio-item" id="hora">
				 			<div class=" cubitos" style="background-color: #3592c6;">
					 			<div class="row">
							 		<div class="col-sm-12">
						 		 		<span class="" id="demo" title="Hora"></span>
							 		</div>
								</div>
								<div class="row">
									<div class="col-sm-6">
										<span class="" style="font-size: 25px;">hrs</span>
									</div>
									<div class="col-sm-6">
										<img class="img-responsive" src="iconos/Hora.png">
									</div>
								</div>
				 			</div>
					</div> <!-- listo hora -->
				 		<div class="col-md-3 portfolio-item" id="temperatura">
					 		<div class=" cubitos" style="background-color: red;">
						 		<div class="row">
							 		<div class="col-sm-12">
						 		 		<span class="" id="demo1" title="Temperatura ambiente"></span>
							 		</div>
								</div>
								<div class="row">
									<div class="col-sm-6">
										<span class="">C&deg;</span>
									</div>
									<div class="col-sm-6">
										<img class="img-responsive" src="iconos/Temperatura.png">
									</div>
								</div>
							</div> 
						</div> <!-- listo temperatura -->
				 		<div class="col-md-3 portfolio-item" id="humedad">
					 	<div class=" cubitos" style="background-color: green;">
						 	<div class="row">
							 	<div class="col-sm-12">
						 		 	<span class="" id="demo2" title="Humedad relativa"></span>
							 	</div>
							</div>
							<div class="row">
								<div class="col-sm-6">
									<span class="">%</span>
								</div>
								<div class="col-sm-6">
									<img class="img-responsive" src="iconos/Humedad.png">
								</div>
							</div>
					 	</div>
				 	</div> <!-- listo humedad-->
				 		<div class="col-md-3 portfolio-item" id="precipitacion">
					 	<div class=" cubitos" style="background-color: purple;">
						 	<div class="row">
							 	<div class="col-sm-12">
						 		 	<span class="" id="demo6" title="Precipitaci&oacute;n acumulada"></span>
							 	</div>
							</div>
							<div class="row">
								<div class="col-sm-6">
									<span class="" style="font-size: 25px;padding-top: 15px;padding-bottom: 15px;">mm</span>
								</div>
								<div class="col-sm-6">
									<img class="img-responsive" src="iconos/Precipitacion.png">
								</div>
							</div>
					 	</div>
				 	</div> <!-- listo precipitacion-->
			 		</div>
         		<div class="row">
				 		<div class="col-md-3 portfolio-item" id="rocio">
					 	<div class=" cubitos" style="background-color: black;">
						 	<div class="row">
							 	<div class="col-sm-12">
						 		 	<span class="" id="demo3" title="Punto roc&iacute;o"></span>
							 	</div>
							</div>
							<div class="row">
								<div class="col-sm-6">
									<span class="">C&deg;</span>
								</div>
								<div class="col-sm-6">
									<img class="img-responsive" src="iconos/Rocio.png"/>
								</div>
							</div>
					 	</div>
				 	</div> <!-- listo rocio-->
				 		<div class="col-md-3 portfolio-item" id="presionatmo">
					 	<div class=" cubitos" style="background-color: orange;">
						 	<div class="row">
							 	<div class="col-sm-12">
						 		 	<span class="" id="demo4" title="Presion atmosf&eacute;rica"></span>
							 	</div>
							</div>
							<div class="row">
								<div class="col-sm-6">
									<span class="" style="font-size: 25px;padding-top: 15px;padding-bottom: 15px;">mmHg</span>
								</div>
								<div class="col-sm-6">
									<img class="img-responsive" src="iconos/PresionAtmosferica.png"/>
								</div>
							</div>
					 	</div>
				 	</div> <!-- listo presionatmo-->
				 		<div class="col-md-3 portfolio-item" id="raciacion">
					 	<div class=" cubitos" style="background-color: brown;">
						 	<div class="row">
							 	<div class="col-sm-12">
						 		 	<span class="" id="demo5" title="Radiaci&oacute;n solar"></span>
							 	</div>
							</div>
							<div class="row">
								<div class="col-sm-6">
									<span class="" style="font-size: 25px;padding-top: 15px;padding-bottom: 15px;">w/m<sup>2</sup></span>
								</div>
								<div class="col-sm-6">
									<img class="img-responsive" src="iconos/RadiacionSolar.png"/>
								</div>
							</div>
					 	</div>
				 	</div> <!-- listo radiacion-->
				 		<div class="col-md-3 portfolio-item" id="evaporacion">
					 	<div class="cubitos" style="background-color: #FE72C4;">
						 	<div class="row">
							 	<div class="col-sm-12">
						 		 	<span class="" id="demo7" title="Evaporaci&oacute;n acumulada"></span>
							 	</div>
							</div>
							<div class="row">
								<div class="col-sm-6">
									<span class="" style="font-size: 25px;padding-top: 15px;padding-bottom: 15px;">mm</span>
								</div>
								<div class="col-sm-6">
									<img class="img-responsive" src="iconos/Evaporacion.png"/>
								</div>
							</div>
					 	</div>
				 	</div> <!-- listo evaporacion-->
					</div>
				</div> <!-- columna de cuadraditos-->
				
				<div class="col-md-3 portfolio-item" id="tabla">
					<table class="table table-striped table-hover" style=" height: 338px; overflow: auto;">
					  <thead>
					    <tr>
					      <th>#</th>
					      <th>Feed</th>
					      <th></th>
					      <th></th>
					    </tr>
					  </thead>
					  <tbody>
					    <tr class="info">
					      <td>1</td>
					      <td>Column content</td>
					      <td>Column content</td>
					      <td>Column content</td>
					    </tr>
					    <tr class="success">
					      <td>2</td>
					      <td>Column content</td>
					      <td>Column content</td>
					      <td>Column content</td>
					    </tr>
					    <tr class="danger">
					      <td>3</td>
					      <td>Column content</td>
					      <td>Column content</td>
					      <td>Column content</td>
					    </tr>
					    <tr class="warning">
					      <td>4</td>
					      <td>Column content</td>
					      <td>Column content</td>
					      <td>Column content</td>
					    </tr>
					    <tr class="active">
					      <td>5</td>
					      <td>Column content</td>
					      <td>Column content</td>
					      <td>Column content</td>
					    </tr>
					  </tbody>
					</table>
				</div> <!-- columna de tabla-->
				
			</div><!-- fin row -->
		<!-- fin de fila de cuadritos y tabla -->
		
		<div class="row" id="logs">
			<div class="col-md-12">
				<h2 class="page-header">Registro completo</h2>
				<ul class="list-group">
				  <li class="list-group-item">
				    <span class="badge" data-toggle="modal" data-target="#hola" style="cursor: pointer;">info</span>
				    Medición del día: <span id="diademedicion"></span>
				  </li>
				  <li class="list-group-item">
				    <span class="badge">2</span>
				    Dapibus ac facilisis in
				  </li>
				  <li class="list-group-item">
				    <span class="badge">1</span>
				    Morbi leo risus
				  </li>
				</ul>
			</div>
		</div>
		
		<div class="modal" id="hola">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
		        <h4 class="modal-title">Resumen del d&iacute;a</h4>
		      </div>
		      <div class="modal-body">
		        <p>una tabla con los logs</p>
		      </div>
		      <div class="modal-footer">
					<p style="float: left;">Para descargar: click derecho y "Save link as"</p>
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		        <button type="button" class="btn btn-primary"><a style="color: white;"href="L1testcomplete.csv" target="_blank">Descargar</a></button>
		      </div>
		    </div>
		  </div>
		</div>
		
		<!-- Footer -->
     <footer>
         <div class="row">
             <div class="col-lg-12">
                 <p>Instituto Tecnológico y de Estudios Superiores de Monterrey Campus Puebla 2015</p>
             </div>
         </div>
         <!-- /.row --> 
     </footer>
	  
	  
	</div><!-- fin de container-->
    
	
    <!-- jQuery -->
    <script src="js/jquery.js"></script>
	 
	 <script src="js/jquery-ui.js"></script>
	 
    
	 
	 
    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>
	 
	 <script>
	 $(document).ready(function(){
		 
		function loadIt(){
			xmlhttp=new XMLHttpRequest();
		 	xmlhttp.open("GET","L1testcomplete.csv",true);
		 	xmlhttp.send();
		 	xmlhttp.onreadystatechange=function()
		 	{
		 		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		 		{
		 			processData(xmlhttp.responseText);
		 		}
		 	}
  		 var d = new Date();
  		 document.getElementById("demo").innerHTML = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();
		}
		loadIt();
		setInterval(function(){
		    loadIt() // this will run after every 5 seconds
		}, 5000);
	 	
	 	function processData(allText) {
	     	var allTextLines = allText.split(/\r\n|\n/);
	     	var headers = allTextLines[0].split(',');
	     	var lines = [];
			console.log(allText);
	     	for (var i=1; i<allTextLines.length; i++) {
	         	var data = allTextLines[i].split(',');
	         	if (data.length == headers.length) {
	 				var tarr = [];
	             for (var j=0; j<headers.length; j++) {
	 					tarr.push(data[j]);
	             }
	             lines.push(tarr);
	         	}
	 		  	//alert(lines[i]);
	    }
		 
		//document.getElementById("demo").innerHTML = lines[1][0];
	  	document.getElementById("demo1").innerHTML = lines[1][2];
	 	document.getElementById("demo2").innerHTML = lines[1][10];
	  	document.getElementById("demo3").innerHTML = lines[1][18];
	  	document.getElementById("demo4").innerHTML = lines[1][26];
	  	document.getElementById("demo5").innerHTML = lines[1][34];
		document.getElementById("demo6").innerHTML = lines[1][44];
		document.getElementById("demo7").innerHTML = lines[1][50];
	 }
	 
   $(function() {
     $("#demo").tooltip();
	  $("#demo1").tooltip();
	  $("#demo2").tooltip();
	  $("#demo3").tooltip();
	  $("#demo4").tooltip();
	  $("#demo5").tooltip();
	  $("#demo6").tooltip();
	  $("#demo7").tooltip();
   });
	 
	 });
	 </script>
	 
</body>

</html>
